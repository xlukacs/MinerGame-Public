!function(t){var e={};function s(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e),s.d(e,"states",(function(){return A})),s.d(e,"game",(function(){return F}));const a=new class{constructor(){this.assets=new Map,this.loadedSounds=new Map,this.images=[{name:"background",src:"./assets/img/bg.png"},{name:"mapBg",src:"./assets/img/mapBg.png"},{name:"player",src:"./assets/img/character.png"},{name:"cart",src:"./assets/img/cart.png"},{name:"map",src:"./assets/img/map.png"},{name:"gold",src:"./assets/img/gold.png"},{name:"diamond",src:"./assets/img/diamond.png"},{name:"menuCharacter",src:"./assets/img/splashCharacter.png"},{name:"settingsBtn",src:"./assets/img/settingsButton.png"},{name:"buttonPair",src:"./assets/img/buttonPair.png"},{name:"spaceButton",src:"./assets/img/spaceButton.png"},{name:"enterButton",src:"./assets/img/enterButton.png"},{name:"backButton",src:"./assets/img/backButton.png"},{name:"sound1Button",src:"./assets/img/sound1Button.png"},{name:"noSound1Button",src:"./assets/img/noSound1Button.png"},{name:"sound2Button",src:"./assets/img/sound2Button.png"},{name:"questionButton",src:"./assets/img/questionButton.png"},{name:"anchor",src:"./assets/img/anchor.png"},{name:"chSprite",src:"./assets/img/characterSprite.png"},{name:"reloadButton",src:"./assets/img/reloadButton.png"}],this.sounds=[{name:"mainTheme",src:"./assets/snd/mainTheme1.mp3"},{name:"goldImpact",src:"./assets/snd/gold.mp3"},{name:"metalImpact",src:"./assets/snd/metal.mp3"},{name:"gameOver",src:"./assets/snd/gameOver.mp3"},{name:"diamondImpact",src:"./assets/snd/diamond.mp3"}]}async init(){await this.loadImages(),await this.loadSounds()}async loadImages(){await Promise.all(this.images.map(t=>this.loadImage(t)))}async loadImage(t){return new Promise(e=>{const s=new Image;s.src=t.src,s.onload=()=>{this.assets.set(t.name,s),e(s)}})}getImage(t){return this.assets.get(t)}async loadSounds(){await Promise.all(this.sounds.map(t=>this.loadSound(t)))}async loadSound(t){return new Promise((e,s)=>{const a=new Audio(t.src);a.oncanplaythrough=()=>{this.loadedSounds.set(t.name,a),e(a)},a.onerror=t=>{s(t)}})}getSound(t){return this.loadedSounds.get(t)}};class n{constructor(){this.tracksPlaying=[],this.currentTrack}setTrack(t){this.currentTrack=a.getSound(t),this.addTrack(t),this.playTrack(t)}addTrack(t){this.tracksPlaying.push({name:t,track:this.currentTrack})}stopTrack(t){this.tracksPlaying.forEach(e=>{e.name===t&&(this.currentTrack=e.track)}),this.currentTrack.pause()}playTrack(t){this.tracksPlaying.forEach(e=>{e.name===t&&(this.currentTrack=e.track)}),this.currentTrack.play()}playAllTrack(){this.tracksPlaying.forEach(t=>{this.currentTrack=t.track,this.currentTrack.play()})}stopAllTrack(){this.tracksPlaying.forEach(t=>{this.currentTrack=t.track,this.currentTrack.pause()})}}const i=new n,r=[];const h=new class{detectCollision(t,e){return F.stateManager.getCollision(t,e)}async startTimer(t){var e=F.objects[11];this.timer=window.setInterval((function(){0==A.gameover&&(60==t?e.setText("1 : 00"):e.setText("0 : "+t),t>0?t--:(clearInterval(this.timer),A.gameover=1))}),1e3)}checkForGameOver(t){(F.player.getX()<0||F.player.getX()>F.canvas.width-F.player.getWidth()||1==A.gameover)&&(F.stateManager.currentState.objects.push(new w(F.canvas.width/2-250,300,200,100,"#7F3300","#FF6A00","Play again","playAgain")),F.stateManager.currentState.objects.push(new w(F.canvas.width/2+50,300,200,100,"#7F3300","#FF6A00","Submit Score","submitScore")),0==A.gameover&&i.setTrack("gameOver"),A.animationOnHold=1,A.gameover=1,cancelAnimationFrame(A.frameID))}animateAnchor(){var t=A.animationOnHold;let e=F.anchor.getAngle(),s=F.anchor.getPhase();var a=0;0==s&&0==t&&(e-=.7,F.anchor.setAngle(e),F.anchorLine.setRotation(e),e<=-45&&F.anchor.setPhase(1),a=1),0==a&&1==s&&0==t&&(e+=.7,F.anchor.setAngle(e),F.anchorLine.setRotation(e),e>=45&&F.anchor.setPhase(0))}fireAnchor(){A.animationOnHold=1;var t=0,e=32,s=F.anchor.getX(),a=F.anchorLine.getEndX(),n=F.anchor.getY(),i=F.anchorLine.getEndY(),r=0;const o=window.setInterval(()=>{e%2==0&&(F.player.setImageState(t%3),t++),e--;var s=2.5*F.dt,a=F.anchor.getX(),n=F.anchor.getY(),i=F.anchorLine.getEndY(),c=F.anchor.getAngle();c=c*Math.PI/180*-1;var d=s*Math.sin(c),g=s*Math.cos(c),l=s*Math.cos(c);e>=16?(a+=d,n+=g,i+=l):(a-=d,n-=g,i-=l),F.anchor.setX(a),F.anchor.setY(n),F.anchorLine.setEndY(i);var m=h.detectCollision(a,n);0!=m&&(e=32-e,F.player.setMoney(F.player.getMoney()+F.stateManager.states.gameState.objects[m].getValue()),F.playerMoney.setText(F.player.getMoney()+"$"),r=m),r>0&&(F.stateManager.states.gameState.objects[r].setX(a),F.stateManager.states.gameState.objects[r].setY(n)),e<=0&&window.clearInterval(o)},100);window.setTimeout(()=>{F.anchor.setX(s),F.anchor.setY(n),F.anchorLine.setEndX(a),F.anchorLine.setEndY(i),A.animationOnHold=0,F.player.setImageState(0),0!=r&&(F.stateManager.states.gameState.objects[r].destroy(),this.playFeedback(F.stateManager.states.gameState.objects[r].getValue(),F.stateManager.states.gameState.objects[r].getName())),r=0},101*e)}playFeedback(t,e){"gold"==e&&i.setTrack("goldImpact"),"diamond"==e&&i.setTrack("diamondImpact"),F.stateManager.states.gameState.objects.push(new l(F.canvas.width/2-50,200,"+ "+t+"$","#00FF21","bold 50px Balthazar")),window.setTimeout(()=>{F.stateManager.states.gameState.objects.pop(),this.checkIfEnoughMoney()},2e3)}clearListeners(){window.removeEventListener("keydown",()=>{},!0),window.removeEventListener("click",()=>{},!0)}checkIfEnoughMoney(){F.player.getMoney()>=F.difficultyManager.getRequiredMoney()&&(A.currentDay++,F.dayManager.loadDay(A.currentDay))}resetTimer(){clearInterval(this.timer),this.startTimer(F.secondsTillGameOver)}};class o{constructor(t,e,s,a){this.x=t,this.y=e,this.width=s,this.height=a,this.name="obj",this.id=Math.random()}handleEvent(t,e){this.isClicked(t)&&this.onclick(e)}onclick(t){}isClicked(t){const e=t.offsetX,s=t.offsetY;return e>=this.x&&e<=this.x+this.width&&s>=this.y&&s<=this.y+this.height}getName(){return this.name}getX(){return this.x}setX(t){this.x=t}setY(t){this.y=t}getY(){return this.y}getCollision(t,e){}}class c extends o{constructor(t,e,s,a,n,i){super(t,e,s,a),this.color=n,this.opacity=i}render(t){t.save(),t.fillStyle=this.color,t.globalAlpha=this.opacity,t.fillRect(this.x,this.y,this.width,this.height),t.restore()}}class d extends o{constructor(t,e,s,a,n,i="no"){super(t,e,s,a),this.image=n,this.partial=i}setPos(t){this.x+=3*t}render(t){if("no"==this.partial)t.drawImage(this.image,this.x,this.y,this.width,this.height);else if("yes"==this.partial){var e;this.image.width,this.image.height,this.width,this.height;e=this.image.width*(this.height/this.image.height),t.drawImage(this.image,this.x,this.y,e,this.height)}}}class g extends d{constructor(t,e,s,a,n,i){super(t,e,s,a,n),this.rotation=i,this.phase=0}getPhase(){return this.phase}setPhase(t){this.phase=t}setAngle(t){this.rotation=t}getAngle(){return this.rotation}render(t){t.save(),t.beginPath(),t.moveTo(F.anchorLine.getX(),F.anchorLine.getY()),t.translate(this.x+this.width/2,this.y+10),t.lineWidth=2,t.rotate(this.rotation*Math.PI/180),t.lineTo(-this.width/2+9,10),t.stroke(),t.drawImage(this.image,-this.width/2,-10,this.width,this.height),t.restore()}}class l extends o{constructor(t,e,s,a="#000000",n="15px Balthazar"){super(t,e),this.text=s,this.color=a,this.font=n}render(t){t.font=this.font,t.fillStyle=this.color,t.fillText(this.text,this.x,this.y)}setText(t){this.text=t}}class m extends o{constructor(t,e,s,a,n){super(t,e,s,a,n),this.image=n,this.money=0,this.stage=0,this.speed=3,this.frame=0}render(t){t.drawImage(this.image,67*this.frame,0,67,122,this.x,this.y,this.width,this.height)}move(t){this.x+=t*this.speed}getX(){return this.x}setImageState(t){this.frame=t}getWidth(){return this.width}getMoney(){return this.money}setMoney(t){this.money=t}}class u extends m{constructor(t,e,s,a,n){super(t,e,s,a,n)}render(t){t.drawImage(this.image,this.x,this.y,this.width,this.height)}move(t){this.x+=t*this.speed}getX(){return this.x}}class p extends o{constructor(t,e,s,a,n,i,r){super(t,e,s,a),this.image=n,this.size=i,this.sizeConst=.8,this.name="gold",this.width=this.width*this.sizeConst*this.size,this.height=this.height*this.sizeConst*this.size,this.id=r,this.value=100}render(t){t.drawImage(this.image,this.x,this.y,this.width*this.sizeConst,this.height*this.sizeConst)}getCollision(t,e){return t>this.x&&t<this.x+this.width*this.sizeConst&&e>this.y&&e<this.y+this.height*this.sizeConst?this.id:0}getValue(){return this.size*this.value}getWidth(){return this.width}destroy(){this.width=0,this.height=0,this.x=-1,this.y=-1}}class y extends p{constructor(t,e,s,a,n,i,r){super(t,e,s,a,n,i,r),this.sizeConst=.5,this.value=200,this.name="diamond"}}class w extends o{constructor(t,e,s,a,n,i,r,h,o="#FFFFFF"){super(t,e,s,a),this.primaryColor=n,this.secondaryColor=i,this.text=r,this.functionToRun=h,this.shadowBlur=3,this.textColor=o}render(t){t.save(),t.shadowBlur=this.shadowBlur,t.shadowColor=this.secondaryColor,t.fillStyle=this.secondaryColor,t.fillRect(this.x-this.shadowBlur,this.y-this.shadowBlur,this.width+2*this.shadowBlur,this.height+2*this.shadowBlur),t.fillStyle=this.primaryColor,t.fillRect(this.x,this.y,this.width,this.height),t.font="bold 30px Balthazar",t.fillStyle=this.textColor,t.shadowBlur=0,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,this.x+this.width/2,this.y+this.height/2),t.restore()}onclick(t){switch(this.functionToRun){case"newGame":t.stateManager.currentState=t.stateManager.states.gameState,h.startTimer(t.secondsTillGameOver);break;case"playAgain":console.log("PLAYAGAIN"),t.start();break;case"GOLD":t.player.setMoney(t.player.getMoney()+100),t.playerMoney.setText(t.player.getMoney()+"$");break;case"submitScore":t.stateManager.changeState("scoreState"),t.stateManager.currentState.startProcess();break;case"enterShop":console.log("Stay tuned for more updates. This option is not implemented!"),alert("This function is not available yet!")}}setText(t){this.text=t}}class v extends d{constructor(t,e,s,a,n,i,r){super(t,e,s,a,n,i,r),this.manager=r}onclick(){this.manager.changeState("settingsState")}}class S extends d{constructor(t,e,s,a,n,i,r,h){super(t,e,s,a,n,i,r,h),this.manager=r,this.canvas=h,this.isSeen=!1}onclick(){0==this.isSeen?(this.manager.currentState.objects.push(new x(this.canvas.width-80,75,60,58,a.getImage("questionButton"),"no",this.manager,this.canvas)),this.manager.currentState.objects.push(new b(this.canvas.width-80,140,60,58,a.getImage("reloadButton"),"no",this.manager,this.canvas)),this.isSeen=!0):(this.manager.currentState.objects.pop(),this.isSeen=!1)}}class b extends d{constructor(t,e,s,a,n,i,r,h){super(t,e,s,a,n,i,r,h),this.manager=r,this.canvas=h}onclick(){F.dayManager.loadDay(1),A.currentDay=1,F.stateManager.states.gameState.objects[13].setText("DAY: 1")}}class x extends d{constructor(t,e,s,a,n,i,r,h){super(t,e,s,a,n,i,r),this.manager=r,this.canvas=h}onclick(){"none"==document.getElementsByClassName("instructions")[0].style.display?document.getElementsByClassName("instructions")[0].style.display="block":document.getElementsByClassName("instructions")[0].style.display="none"}}class f extends d{constructor(t,e,s,a,n,i,r,h){super(t,e,s,a,n,i,r),this.manager=r,this.newState=h}onclick(){this.manager.changeState(this.newState),"menuState"==this.newState&&F.start()}}class M extends d{constructor(t,e,s,a,n,i,r,h){super(t,e,s,a,n,i,r),this.manager=r,this.toState=h}onclick(){console.log("SOUNDS"),"on"==this.toState?i.playAllTrack():i.stopAllTrack()}}class k extends o{constructor(t,e,s,a,n,i,r){super(t,e,n),this.endX=s,this.endY=a,this.color=i,this.rotation=r,this.speed=3}render(t){t.save(),t.translate(this.x,this.y),t.rotate(this.rotation*Math.PI/180),t.beginPath(),t.lineWidth=this.width,t.strokeStyle=this.color,t.moveTo(0,0),t.lineTo(this.endX,this.endY),t.stroke(),t.restore()}move(t){this.x+=t*this.speed}setRotation(t){this.rotation=t}setX(t){this.x=t}setY(t){this.y=t}setEndX(t){this.endX=t}setEndY(t){this.endY=t}getEndX(){return this.endX}getEndY(){return this.endY}}class T{constructor(t,e){this.manager=t;this.canvas=e}render(t){this.objects.forEach(e=>{e.render(t)})}handleEvent(t,e){this.objects.forEach(s=>{s.handleEvent(t,e)})}addObject(t){this.objects.push(t)}getCollision(t,e){var s,a=0;return this.objects.forEach(n=>{(s=n.getCollision(t,e))>a&&(a=s)}),a}}class B extends T{constructor(t,e){super(t,e);const s=new w(this.canvas.width/2-350,300,200,100,"#7F3300","#FF6A00","Start Game","newGame"),n=new w(this.canvas.width/2-350,450,200,100,"#bf997f","#d8c1b2","SHOP","enterShop"),i=new v(this.canvas.width/2-210,600,61,58,a.getImage("settingsBtn"),"no",t);this.objects=[new d(0,0,this.canvas.width,this.canvas.height,a.getImage("background")),new d(this.canvas.width/2,50,587,659,a.getImage("menuCharacter")),new l(this.canvas.width/2-115,100,"Epic Miner Game","#000000","bold 35px Balthazar"),s,n,i]}}class I extends T{constructor(t,e){super(t,e);const s=new m(20,140,90,150,a.getImage("chSprite")),n=new g(s.getX()+36,260,18,30,a.getImage("anchor"),0);this.objects=[new d(0,290,this.canvas.width,this.canvas.height,a.getImage("mapBg")),new l(this.canvas.width/2-115,50,"EPIC MINER GAME","#000000","bold 35px Balthazar"),new d(0,0,this.canvas.width,300,a.getImage("background")),s,new u(s.getX()+9,250,73,50,a.getImage("cart")),n,new k(s.getX()+45,270,0,9,2,"#000000",n.getAngle()),new l(50,50,"TARGET: ","#000000","bold 30px Balthazar"),new l(200,50,"850$","#000000","bold 30px Balthazar"),new l(50,100,"MONEY: ","#000000","bold 30px Balthazar"),new w(170,60,100,50,"#333333","#FFD800","0 $","misc","#4CFF00"),new w(this.canvas.width-220,18,130,54,"#7F3300","#FF6A00","1 : 00","misc"),new S(this.canvas.width-80,15,61,58,a.getImage("settingsBtn"),"no",t,this.canvas),new l(this.canvas.width/2,50,"DAY: "+A.currentDay,"#000000","bold 25px Calibri")]}}class j extends T{constructor(t,e){super(t,e),this.objects=[new d(0,0,this.canvas.width,this.canvas.height,a.getImage("background")),new l(this.canvas.width/2-75,50,"SETTINGS","#FFD800","bold 35px Balthazar"),new c(this.canvas.width/2-300,this.canvas.height/2-200,600,400,"#000000",.4),new l(this.canvas.width/2-250,250,"Controls","black","bold 30px Balthazar"),new l(this.canvas.width/2-250,320,"LEFT / RIGHT","black","bold 25px Balthazar"),new d(this.canvas.width/2+150,280,137,59,a.getImage("buttonPair")),new l(this.canvas.width/2-250,390,"SHOOT ANCHOR","black","bold 25px Balthazar"),new d(this.canvas.width/2+150,350,137,59,a.getImage("spaceButton")),new l(this.canvas.width/2-250,460,"USE ITEM","black","bold 25px Balthazar"),new d(this.canvas.width/2+150,420,137,59,a.getImage("enterButton")),new f(this.canvas.width-160,60,60,58,a.getImage("backButton"),"no",t,"menuState"),new M(this.canvas.width/2-270,520,60,58,a.getImage("sound1Button"),"no",t,"on"),new M(this.canvas.width/2-200,520,60,58,a.getImage("noSound1Button"),"no",t,"off")]}}class D extends T{constructor(t,e){super(t,e),this.objects=[new d(0,0,this.canvas.width,this.canvas.height,a.getImage("background")),new l(this.canvas.width/2-75,50,"HIGHEST SCORES","#000000","bold 35px Balthazar"),new f(this.canvas.width-160,60,60,58,a.getImage("backButton"),"no",t,"menuState"),new c(this.canvas.width/2-300,this.canvas.height/2-200,600,400,"#000000",.4)]}startProcess(){if(0==F.addScore){F.addScore++,A.continue=1;var t=this.getName();this.addNameToBoard(t),this.clearBoard(),this.renderBoard()}}getName(){return prompt("Please enter your name down below to submit score!")}addNameToBoard(t){r.push({name:t,score:F.player.getMoney()})}clearBoard(){this.objects.splice(4,this.objects.length-4)}renderBoard(){var t=1;r.sort((t,e)=>e.score-t.score),r.forEach(e=>{t<7&&this.objects.push(new l(this.canvas.width/2-250,this.canvas.height/2-150+50*t,t+": "+e.score+"$  by  "+e.name,"#000000","normal 25px Balthazar")),t++})}}window.playSounds=function(){i.playAllTrack()},window.stopSounds=function(){i.stopAllTrack()};class E{constructor(t){this.canvas=t;this.soundManager=new n}async init(){await a.init().then(console.log("Assets loaded")),this.states={menuState:new B(this,this.canvas),gameState:new I(this,this.canvas),settingsState:new j(this,this.canvas),scoreState:new D(this,this.canvas)},this.currentState=this.states.menuState,function(t,e,s){var a=new Date;a.setTime(a.getTime()+24*s*60*60*1e3);var n="expires="+a.toUTCString();document.cookie=t+"="+e+";"+n+";path=/"}("sound","yes",7)}changeState(t){const e=this.states[t];this.currentState=e}render(t){this.currentState.render(t)}handleEvent(t,e){this.currentState.handleEvent(t,e)}getCollision(t,e){return this.currentState.getCollision(t,e)}}class C{constructor(t){this.file=t}async init(){}loadData(t){var e,s=new XMLHttpRequest;return s.onreadystatechange=function(){200==s.status&&4==s.readyState&&(e=this.responseText)},s.open("GET",t,!1),s.send(),JSON.parse(e)}setupDay(t){F.stateManager.states.gameState.objects[13].setText("DAY: "+A.currentDay),F.stateManager.states.gameState.objects[8].setText(this.parsedData.days[t-1].data[0].requiredMoney+" $"),this.parsedData.days[t-1].data[1].gold.forEach(t=>{F.stateManager.states.gameState.objects.push(new p(t.xPos,t.yPos,70,70,a.getImage("gold"),t.size,t.id))}),this.parsedData.days[t-1].data[1].diamond.forEach(t=>{F.stateManager.states.gameState.objects.push(new y(t.xPos,t.yPos,70,70,a.getImage("diamond"),t.size,t.id))})}getRequiredMoney(){return this.getMaxDays()<=A.currentDay?this.parsedData.days[this.getMaxDays()-1].data[0].requiredMoney:this.parsedData.days[A.currentDay-1].data[0].requiredMoney}getOreCount(){let t=0;return this.parsedData.days[A.currentDay-1].data[1].gold.forEach(e=>{t++}),this.parsedData.days[A.currentDay-1].data[1].diamond.forEach(e=>{t++}),t}getMaxDays(){return this.parsedData.days.length}}class P{constructor(){this.startDay=1}loadDay(t){null==t&&(t=this.startDay),t>F.difficultyManager.getMaxDays()&&(t=F.difficultyManager.getMaxDays()),this.resetDayData(),F.difficultyManager.setupDay(t),1!=t&&this.playAnimation(t)}resetDayData(){let t=[];t=F.stateManager.states.gameState.objects.slice(0,14),F.stateManager.states.gameState.objects=[],F.stateManager.states.gameState.objects=t,A.currentDay>1&&(h.resetTimer(),F.player.setMoney(0),F.playerMoney.setText(F.player.getMoney()+"$"))}playAnimation(t){F.stateManager.states.gameState.objects.push(new l(F.canvas.width/2-130,F.canvas.height/2-200,"You reached level: "+t,"#FFFFFF","bold 45px Balthazar")),window.setTimeout(()=>{F.stateManager.states.gameState.objects.pop()},1500)}}const A={gameover:0,animationOnHold:0,frameID:null,continue:0,eventListeners:[],currentDay:1};const F=new class{constructor(t){this.canvas=document.getElementById(t),this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.stateManager=new E(this.canvas),this.difficultyManager=new C("./days.json"),this.dayManager=new P;const e=this.canvas.getContext("2d");this.ctx=e,this.time,this.dt,this.then,this.startTime=(new Date).getTime(),this.secondsTillGameOver=60,this.globalGameOver=0,this.day=1,this.addScore}async start(){await this.stateManager.init(),await this.difficultyManager.init(),this.initialise(),null==A.frameID&&this.gameLoop()}initialise(){this.dayManager.loadDay(A.currentDay),this.player=this.stateManager.states.gameState.objects[3],this.cart=this.stateManager.states.gameState.objects[4],this.anchor=this.stateManager.states.gameState.objects[5],this.anchorLine=this.stateManager.states.gameState.objects[6],this.objects=this.stateManager.states.gameState.objects,this.playerMoney=this.stateManager.states.gameState.objects[10],A.gameover=0,A.animationOnHold=0,this.addScore=0,0==A.eventListeners.length&&(A.eventListeners.push(window.addEventListener("keydown",t=>{this.move(t)},!0)),A.eventListeners.push(window.addEventListener("click",t=>{this.checkClick(t,F)},!0)))}async checkClick(t,e){this.stateManager.handleEvent(t,e)}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}update(t){this.updateTime(),h.animateAnchor(),this.stateManager.currentState==this.stateManager.states.gameState&&h.checkForGameOver(t)}render(){this.clear(),this.stateManager.render(this.ctx)}updateTime(){this.time=Date.now(),this.dt=this.time-this.then,this.then=this.time}gameLoop(){A.frameID=requestAnimationFrame(()=>{this.update(),this.render(),this.gameLoop()})}move(t){if(0==A.animationOnHold)switch(t.keyCode){case 37:this.player.move(-1),this.cart.move(-1),this.anchor.setPos(-1),this.anchorLine.move(-1);break;case 39:this.player.move(1),this.cart.move(1),this.anchor.setPos(1),this.anchorLine.move(1);break;case 32:0==A.animationOnHold&&h.fireAnchor()}}}("gameArea");F.start()}]);